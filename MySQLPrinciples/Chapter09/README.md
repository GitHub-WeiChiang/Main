Chapter09 存放頁面的大池子 -- InnoDB 的表格空間
=====
* ### 表格空間是一個抽象概念。
    * ### 系統表格空間: 對應檔案系統中一個或多個檔案。
    * ### 獨立表格空間: 對應檔案系統中一個名為 ".bd" 的實際檔案。
    * ### 可視為被切分成許多個頁的池子，插入記錄時從池子中撈出對應頁並寫入。
* ### 頁面的類型 (以下省略 "FILE_PAGE_" 前綴)
    * ### TYPE_ALLOCATED: 未使用。
    * ### UNDO_LOG: undo 記錄頁。
    * ### INODE: 儲存段的資訊。
    * ### IBUF_FREE_LIST: Change Buffer 空閒列表。
    * ### IBUF_BITMAP: Change Buffer 屬性。
    * ### TYPE_SYS: 系統資料。
    * ### TYPE_TRX_SYS: 交易系統資料。
    * ### TYPE_FSP_HDR: 表格空間表頭資訊。
    * ### TYPE_XDES: 儲存區屬性。
    * ### TYPE_BLOB: 溢位頁。
    * ### INDEX: 索引頁 (資料頁)。
* ### 頁面通用部分
    * ### File Header: 頁面通用資訊。 (以下省略 "FILE_PAGE_" 前綴)
        * ### SPACE_OR_CHKSUM: checkssum 校正碼 (MySQL 4.0.14 以下的版本此屬性用於表示表格空間 ID)。
        * ### OFFSET: 頁號。
        * ### PREV: 上一頁頁號 (主要用於 INDEX 頁)。
        * ### NEXT: 下一頁頁號 (主要用於 INDEX 頁)。
        * ### LSN: 該頁面最後修改對應的 LSN (Log Squence Number)。
        * ### TYPE: 頁面類型。
        * ### FILE_FLUSH_LSN: 僅在系統表格空間的第一個頁中定義，代表檔案至少被刷新到了對應的 LSN (Log Squence Number)。
        * ### ARCH_LOG_NO_OR_SPACE_ID: 該頁屬於哪一個表格空間。
    * ### File Trailer: 驗證頁面完整性 (記憶體刷新至磁碟內容是否相同)。
    * ### 表格空間中的每一個頁都對應著一個頁號，頁號在表格空間中可以快速定位到指定的頁面。
    * ### 某些類型的頁可以組成鏈結串列 (雙向)，鏈結串列中相鄰的兩個頁面的頁號可以不連續，也就是可以不按照表格空間中的物理位置相鄰儲存。
* ### 獨立表格空間結構
    * ### 1 組: 256 區。
    * ### 1 區: 64 頁 (1 M)。
    * ### 1 頁: 16 KB。
    * ### 頁 > 區 > 組。
    * ### 段 (邏輯概念): 區的集合 (葉子區集合 & 非葉子區集合) + 存在於碎片區的零散頁。
    * ### 碎片區 (區的一種): 含不同段的頁。
    * ### 區 (extent) 的概念
        * ### 用於管理頁。
        * ### 連續 64 個頁是一個區。
        * ### 一個區佔用 1 MB 大小。
        * ### 表格空間由多個連續的區組成。
        * ### 256 個區被劃分成一組。
    * ### 第一個組的前三個頁面是固定的
        * ### FSP_HDR: 包含整個表格空間的整體屬性與本組所有的區的屬性 (一個表格空間只有一個 FSP_HDR)。
        * ### IBUF_BITMAP: 儲存關於 Change Buffer 資訊。
        * ### INODE: 儲存許多 INODE Entry 資料結構。
    * ### 其餘組前兩個頁面類型是固定的
        * ### XDES (Extent Descriptor): 登記本組 256 個區的屬性 (與 FSP_HDR 類似但不包含額外屬於表格空間的屬性)。
        * ### IBUF_BITMAP: 儲存關於 Change Buffer 資訊。
    * ### 講了這麼多，記住，表格空間被劃分為許多連續的區，每個區預設由 64 個頁組成，每 256 個區劃分為一組，每組的前幾個頁面類型是固定的。
<br />
