Chapter14 基於規則的最佳化 (內含子查詢最佳化二三事)
=====
* ### 條件化簡
    * ### 移除不必要的括號。
    * ### 常數傳遞。
    * ### 移除沒用的條件。
    * ### 運算式計算。
    * ### HAVING 子句和 WHERE 子句的合併。
    * ### 常數表檢測。
        * ### 設計 MySQL 的工程師認為下述兩種類型的查詢速度很快。
        * ### 查詢表中一筆記錄都沒有或是只有一筆記錄。
        * ### 使用主鍵相等匹配或唯一二級索引列相等匹配作為搜索條件來查詢某表。
        * ### 上述兩種查詢方式所查詢的表被稱為 "常數表 (constant table)"。
        * ### 查詢最佳化工具在分析一個查詢敘述時，首先執行常數表查詢，然後會把涉及該表的條件全替換成常數，最後才分析其餘表的查詢成本。
    * ### 註: HAVING 子句與 WHERE 子句的差異為，前者可以搭配 Aggregate Function。
* ### 外連接消除
    * ### "內連接" 的 "驅動表" 和 "被驅動表" 的 "位置可以相互轉換"。
    * ### "外連接" 無論是左連接還是又連接，驅動表和被驅動表是固定的 "不可戶換"。
    * ### 因此，"內連接" 可能 "透過最佳化表連接順序" 降低整體查詢成本。
    * ### 而 "外連接" 無法最佳化表連接順序。
    * ### 複習一下:
        * ### 內連接的兩個表: "驅動表" 中的記錄在 "被驅動表" 中無法匹配時，"不加入" 結果集。
        * ### 外連接的兩個表: "驅動表" 中的記錄在 "被驅動表" 中無法匹配時，"仍加入" 結果集 (使用 NULL 填充欄位)。
    * ### 在 WHERE 子句的搜索條件中指定 "被驅動表的列不為 NULL"，這種情況下，外連接和內連接本質上就沒有區別了。
    * ### 上述方法被稱為 "空值拒絕 (reject - NULL)"。
    * ### 使用 "空值拒絕" 會導致外連接和內連接可以相互轉換，好處就是最佳化器可以透過評估不同連接順序成本，選擇連接順序成本最低的方案執行查詢。
* ### 子查詢最佳化
    * ### 出現在某個查詢 (外層查詢) 敘述的某個位置中的查詢就稱為子查詢 (寶寶查詢)。
    * ### 當子查詢被放置在 FROM 子句後，這個子查詢被稱為 "衍生表"。
* ### 按返回結果集區分子查詢
    * ### 純量子查詢: 只返回一個單一值。
    * ### 行子查詢: 返回一筆記錄的子查詢 (需包含數個列)。
    * ### 列子查詢: 返回一個列的資料 (需包含數個行)。
    * ### 表子查詢: 包還多筆記錄的數個列。
* ### 按與外層查詢的關係來區分子查詢
    * ### 不相關子查詢: 子查詢可以單獨運行出結果，不依賴於外層查詢的值。
    * ### 相關子查詢: 子查詢的執行需要依賴外層查詢的值。
<br />
