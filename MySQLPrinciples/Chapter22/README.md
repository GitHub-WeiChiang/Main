Chapter22 工作面試老大難 -- 鎖
=====
* ### 共用鎖 (Shared Lock): S 鎖，交易要讀取一筆紀錄時需要先獲取該記錄的 S 鎖。
* ### 獨佔鎖 (Exclusive Lock): Ｘ 鎖，又稱排它鎖，在交易要改動一筆紀錄時需要先獲取該記錄的 Ｘ 鎖。
* ### InnoDB 行級鎖類型
    * ### Record Lock: 只對紀錄本身加鎖。
    * ### Gap Lock: 鎖住記錄前的間隙，防止別的交易向該間隙插入新紀錄。
    * ### Next - Key Lock: 上述兩者的結合，既保護記錄本身，也防止別的交易向該間隙插入新紀錄。
    * ### Insert Intention Lock: 很雞肋的鎖，僅是為了解決在當前交易插入紀錄時因碰到別的交易加的 gap 鎖而進入等候狀態時也生成一個鎖結構而提出的，某個交易獲取一筆記錄的該類型的鎖後，不會阻止別的交易，繼續獲取該記錄上任何類型的鎖。
    * ### 隱適鎖: 依靠記錄的 trx_id 屬性來保護不被別的交易改動該記錄。
* ### InnoDB 儲存引擎的鎖都在記憶體中對應著一個鎖結構，有時為了節省鎖結構會把符合下面條件的鎖放到同一個鎖結構中。
    * ### 在同一個交易中進行加鎖操作。
    * ### 被加鎖的紀錄在同一個頁面中。
    * ### 加鎖的類型是一樣的。
    * ### 等候的狀態是一樣的。
<br />
